version: 2

sources:
  - name: src_atr_project
    database: summer-nucleus-471608-c4
    schema: attribution_test
    tables:
      - name: stg_events
        columns:
          - name: user_pseudo_id
            tests:  
              - not_null  
          - name: event_timestamp
            tests:  
              - not_null                

  - name: src_stg
    database: summer-nucleus-471608-c4
    schema: dbt_gnaresh
    tables:  
      - name: streaming_data
        columns:
          - name: user_pseudo_id
            description: primary key          
            tests:
              - not_null
          - name: channel
            description: combination of source and medium columns              
            tests:
              - not_null
              - accepted_values:
                   values: ['(data deleted)/(data deleted)','(direct)/(none)','<Other>/(data deleted)','<Other>/<Other>','<Other>/organic','<Other>/referral','google/cpc','google/organic','shop.googlemerchandisestore.com/referral']              
      
      - name: int_user_ranks 
      - name: mart_first_click
      - name: mart_last_click  
      - name: attributions_final       